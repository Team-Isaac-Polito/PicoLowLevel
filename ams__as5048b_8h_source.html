<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PicoLowLevel: lib/AbsoluteEncoder/src/ams_as5048b.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PicoLowLevel
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ams__as5048b_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ams_as5048b.h</div></div>
</div><!--header-->
<div class="contents">
<a href="ams__as5048b_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/**************************************************************************/</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="comment">/**************************************************************************/</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#if ARDUINO &gt;= 100</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor"> #include &lt;Arduino.h&gt;</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="preprocessor"> #include &lt;WProgram.h&gt;</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="preprocessor">#include &lt;Wire.h&gt;</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="comment">// custom debug class</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">Debug.h</a>&quot;</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span> </div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="preprocessor">#ifndef _AMS_AS5048B_H_</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="preprocessor">#define _AMS_AS5048B_H_</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span> </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#a7c938a2235b014e3e12d63e2f26df8f7">   62</a></span><span class="preprocessor">#define ANGLE_READ_ERROR -1000</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span> </div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="comment">// OPERATIONS</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><span class="comment">//#define SERIAL_DEBUG_ENABLED - modified to use custom Debug class</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="comment">//#define USE_WIREBEGIN_ENABLED // to comment if Wire.begin() function is called in Setup() for instance. Usefull to manage one or several I2C devices in the same sketch</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span> </div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="comment">// Default addresses for AS5048B</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#af39e0f922e8e48b514f4167ccfc63b0f">   70</a></span><span class="preprocessor">#define AS5048_ADDRESS 0x40 </span><span class="comment">// 0b10000 + ( A1 &amp; A2 to GND)</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#ac2917ed2451e473b21ee53eebbba3114">   71</a></span><span class="preprocessor">#define AS5048B_PROG_REG 0x03</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#aaa28bbb78cbbb9d0250f581858c7ac4f">   72</a></span><span class="preprocessor">#define AS5048B_ADDR_REG 0x15</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#af0b253afd9fe470dbb85482d2bf3b334">   73</a></span><span class="preprocessor">#define AS5048B_ZEROMSB_REG 0x16 </span><span class="comment">//bits 0..7</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#a3280a4977e72f189c40222ceea16a921">   74</a></span><span class="preprocessor">#define AS5048B_ZEROLSB_REG 0x17 </span><span class="comment">//bits 0..5</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#a22815c51c803b42b5779d9deb443f734">   75</a></span><span class="preprocessor">#define AS5048B_GAIN_REG 0xFA</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#aada09350227f3783b25d5b694e68f8d1">   76</a></span><span class="preprocessor">#define AS5048B_DIAG_REG 0xFB</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#ad5e31532976c6f3c390d691ff3104c8a">   77</a></span><span class="preprocessor">#define AS5048B_MAGNMSB_REG 0xFC </span><span class="comment">//bits 0..7</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#a33d98a3d1e056dd701e772b9dc1cba09">   78</a></span><span class="preprocessor">#define AS5048B_MAGNLSB_REG 0xFD </span><span class="comment">//bits 0..5</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#a0af8a4f1f08fe1ba6ed853bbbbe15733">   79</a></span><span class="preprocessor">#define AS5048B_ANGLMSB_REG 0xFE </span><span class="comment">//bits 0..7</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#aed8a37b7c2fcadad9cedbb42d20e2e2a">   80</a></span><span class="preprocessor">#define AS5048B_ANGLLSB_REG 0xFF </span><span class="comment">//bits 0..5</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#ad9c88301604c6717986d97a5460405a2">   81</a></span><span class="preprocessor">#define AS5048B_RESOLUTION 16384.0 </span><span class="comment">//14 bits</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span> </div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span> </div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="comment">// Moving Exponential Average on angle - beware heavy calculation for some Arduino boards</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span><span class="comment">// This is a 1st order low pass filter</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="comment">// Moving average is calculated on Sine et Cosine values of the angle to provide an extrapolated accurate angle value.</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#a727712d71a8d22e11bffb2985a798b24">   87</a></span><span class="preprocessor">#define EXP_MOVAVG_N 5  </span><span class="comment">//history length impact on moving average impact - keep in mind the moving average will be impacted by the measurement frequency too</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#a326dc9e412d5de0c3a2262e93900be36">   88</a></span><span class="preprocessor">#define EXP_MOVAVG_LOOP 1 </span><span class="comment">//number of measurements before starting mobile Average - starting with a simple average - 1 allows a quick start. Value must be 1 minimum</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="comment">//unit consts - just to make the units more readable</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#a50a0dba364fcf860f5dcf0925044a855">   91</a></span><span class="preprocessor">#define U_RAW 1</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#aae96eab81af58400dbbdcfacb637a081">   92</a></span><span class="preprocessor">#define U_TRN 2</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#a15d9efbfd44b0034e50d02e6d6e1c77f">   93</a></span><span class="preprocessor">#define U_DEG 3</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#aea1a31ca1a12601341fec4e65f18cc06">   94</a></span><span class="preprocessor">#define U_RAD 4</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#ae0c7a1469237b07df9fab72da030eaf4">   95</a></span><span class="preprocessor">#define U_GRAD 5</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#ac6eb74a595d17eaffa68af26e7ee38bb">   96</a></span><span class="preprocessor">#define U_MOA 6</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#a57bdbfe869e73d062cec16fec1c75249">   97</a></span><span class="preprocessor">#define U_SOA 7</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#aedb6ad68543282ad6cdfa7f53fbfba69">   98</a></span><span class="preprocessor">#define U_MILNATO 8</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#a22390954a492f7661dfa1fb99a7562cf">   99</a></span><span class="preprocessor">#define U_MILSE 9</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno"><a class="line" href="ams__as5048b_8h.html#abe2f3b938f958d26130ac588f75639f3">  100</a></span><span class="preprocessor">#define U_MILRU 10</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="foldopen" id="foldopen00106" data-start="{" data-end="};">
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno"><a class="line" href="classAMS__AS5048B.html">  106</a></span><span class="keyword">class </span><a class="code hl_class" href="classAMS__AS5048B.html">AMS_AS5048B</a> {</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <a class="code hl_function" href="classAMS__AS5048B.html#ac46ed9e5bbc07b3360fdb71de014eb59">AMS_AS5048B</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <a class="code hl_function" href="classAMS__AS5048B.html#ac46ed9e5bbc07b3360fdb71de014eb59">AMS_AS5048B</a>(uint8_t chipAddress);</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span> </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    <span class="keywordtype">void</span>        <a class="code hl_function" href="classAMS__AS5048B.html#ab0d51d2f59926a877e73b17c04db59ee">begin</a>(<span class="keywordtype">void</span>); <span class="comment">// to init the object, must be called in the setup loop</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <span class="keywordtype">void</span>        <a class="code hl_function" href="classAMS__AS5048B.html#ac2485a851c68e9a5b410c47ffc3485ca">toggleDebug</a>(<span class="keywordtype">void</span>); <span class="comment">// start / stop debug through serial at anytime</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="keywordtype">void</span>        <a class="code hl_function" href="classAMS__AS5048B.html#a2e02b46721e5b2f32fcae3eda6b73368">setClockWise</a>(<span class="keywordtype">boolean</span> cw = <span class="keyword">true</span>); <span class="comment">//set clockwise counting, default is false (native sensor)</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="keywordtype">void</span>        <a class="code hl_function" href="classAMS__AS5048B.html#a6ff8070d7845ce5ef325a6c64ea29c96">progRegister</a>(uint8_t regVal); <span class="comment">//nothing so far - manipulate the OTP register</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="keywordtype">void</span>        <a class="code hl_function" href="classAMS__AS5048B.html#a9acf55772619d8df888be48c8a31eef8">doProg</a>(<span class="keywordtype">void</span>); <span class="comment">//progress programming slave address OTP</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="keywordtype">void</span>        <a class="code hl_function" href="classAMS__AS5048B.html#a69012e91b30cd4182f072a7d2f377305">doProgZero</a>(<span class="keywordtype">void</span>); <span class="comment">//progress programming zero position OTP</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <span class="keywordtype">void</span>        <a class="code hl_function" href="classAMS__AS5048B.html#a8faebc24296fd8ac9464f5b5aab0d1d1">addressRegW</a>(uint8_t regVal); <span class="comment">//change the chip address</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    uint8_t     <a class="code hl_function" href="classAMS__AS5048B.html#a02b3c3054c8cca8c3d8167b835794ff6">addressRegR</a>(<span class="keywordtype">void</span>); <span class="comment">//read chip address</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <span class="keywordtype">void</span>        <a class="code hl_function" href="classAMS__AS5048B.html#ad67ba3de9224a12102a31b35829450e8">setZeroReg</a>(<span class="keywordtype">void</span>); <span class="comment">//set Zero to current angle position</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <span class="keywordtype">void</span>        <a class="code hl_function" href="classAMS__AS5048B.html#a67cbd882f0300705d615ce1e2dff2f47">zeroRegW</a>(uint16_t regVal); <span class="comment">//write Zero register value</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    uint16_t    <a class="code hl_function" href="classAMS__AS5048B.html#a7784bc5f991bb485c2731a7189d277bf">zeroRegR</a>(<span class="keywordtype">void</span>); <span class="comment">//read Zero register value</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    uint16_t    <a class="code hl_function" href="classAMS__AS5048B.html#a4b356e895fbcddf68eeffaa020b27420">angleRegR</a>(<span class="keywordtype">void</span>); <span class="comment">//read raw value of the angle register</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno"><a class="line" href="classAMS__AS5048B.html#a6513ba719d6a2267b74ed56ba078df2a">  123</a></span>    uint8_t     <a class="code hl_function" href="classAMS__AS5048B.html#a6513ba719d6a2267b74ed56ba078df2a">diagR</a>(<span class="keywordtype">void</span>); <span class="comment">//read diagnostic register</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    uint16_t    <a class="code hl_function" href="classAMS__AS5048B.html#acd55346e4eedada7b86e43f42822ae2a">magnitudeR</a>(<span class="keywordtype">void</span>); <span class="comment">//read current magnitude</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="keywordtype">double</span>      <a class="code hl_function" href="classAMS__AS5048B.html#a23b78448232baf368c4e45f99c139775">angleR</a>(<span class="keywordtype">int</span> unit = <a class="code hl_define" href="ams__as5048b_8h.html#a50a0dba364fcf860f5dcf0925044a855">U_RAW</a>, <span class="keywordtype">boolean</span> newVal = <span class="keyword">true</span>); <span class="comment">//Read current angle or get last measure with unit conversion : RAW, TRN, DEG, RAD, GRAD, MOA, SOA, MILNATO, MILSE, MILRU</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    uint8_t     <a class="code hl_function" href="classAMS__AS5048B.html#a5be27698e144b1889f9df2f43ad85cc9">getAutoGain</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    uint8_t     <a class="code hl_function" href="classAMS__AS5048B.html#ae2ebf1d3b0e9b9cf73fbf5ea22ada636">getDiagReg</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="keywordtype">void</span>        <a class="code hl_function" href="classAMS__AS5048B.html#a20a1cab67cc2ec87135366723893b1aa">updateMovingAvgExp</a>(<span class="keywordtype">void</span>); <span class="comment">//measure the current angle and feed the Exponential Moving Average calculation</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    <span class="keywordtype">double</span>      <a class="code hl_function" href="classAMS__AS5048B.html#a5ebbbdaf9712f2e7b23da3086515a34b">getMovingAvgExp</a>(<span class="keywordtype">int</span> unit = <a class="code hl_define" href="ams__as5048b_8h.html#a50a0dba364fcf860f5dcf0925044a855">U_RAW</a>); <span class="comment">//get Exponential Moving Average calculation</span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <span class="keywordtype">void</span>        <a class="code hl_function" href="classAMS__AS5048B.html#ac4b8db2e8d36e45d894812aa799cd89e">resetMovingAvgExp</a>(<span class="keywordtype">void</span>); <span class="comment">//reset Exponential Moving Average calculation values</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span> </div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="comment">//variables</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    <span class="keywordtype">boolean</span>     _debugFlag;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="keywordtype">boolean</span>     _clockWise;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    uint8_t     _chipAddress;</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    uint8_t     _addressRegVal;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    uint16_t    _zeroRegVal;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="keywordtype">double</span>      _lastAngleRaw;</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    <span class="keywordtype">double</span>      _movingAvgExpAngle;</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <span class="keywordtype">double</span>      _movingAvgExpSin;</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    <span class="keywordtype">double</span>      _movingAvgExpCos;</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    <span class="keywordtype">double</span>      _movingAvgExpAlpha;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="keywordtype">int</span>     _movingAvgCountLoop;</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    <span class="keywordtype">boolean</span>     _i2cerror;</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="comment">//methods</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    uint8_t     readReg8(uint8_t address);</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    uint16_t    readReg16(uint8_t address); <span class="comment">//16 bit value got from 2x8bits registers (7..0 MSB + 5..0 LSB) =&gt; 14 bits value</span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    <span class="keywordtype">void</span>        writeReg(uint8_t address, uint8_t value);</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="keywordtype">double</span>      convertAngle(<span class="keywordtype">int</span> unit, <span class="keywordtype">double</span> angle); <span class="comment">//RAW, TRN, DEG, RAD, GRAD, MOA, SOA, MILNATO, MILSE, MILRU</span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <span class="keywordtype">double</span>      getExpAvgRawAngle(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    <span class="keywordtype">void</span>        printDebug(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>};</div>
</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span> </div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span><span class="preprocessor">#endif</span></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aams__as5048b_8h_html_a50a0dba364fcf860f5dcf0925044a855"><div class="ttname"><a href="ams__as5048b_8h.html#a50a0dba364fcf860f5dcf0925044a855">U_RAW</a></div><div class="ttdeci">#define U_RAW</div><div class="ttdef"><b>Definition</b> ams_as5048b.h:91</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html"><div class="ttname"><a href="classAMS__AS5048B.html">AMS_AS5048B</a></div><div class="ttdef"><b>Definition</b> ams_as5048b.h:106</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_a02b3c3054c8cca8c3d8167b835794ff6"><div class="ttname"><a href="classAMS__AS5048B.html#a02b3c3054c8cca8c3d8167b835794ff6">AMS_AS5048B::addressRegR</a></div><div class="ttdeci">uint8_t addressRegR(void)</div><div class="ttdoc">reads I2C address register value</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:223</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_a20a1cab67cc2ec87135366723893b1aa"><div class="ttname"><a href="classAMS__AS5048B.html#a20a1cab67cc2ec87135366723893b1aa">AMS_AS5048B::updateMovingAvgExp</a></div><div class="ttdeci">void updateMovingAvgExp(void)</div><div class="ttdoc">Performs an exponential moving average on the angle. Works on Sine and Cosine of the angle to avoid i...</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:373</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_a23b78448232baf368c4e45f99c139775"><div class="ttname"><a href="classAMS__AS5048B.html#a23b78448232baf368c4e45f99c139775">AMS_AS5048B::angleR</a></div><div class="ttdeci">double angleR(int unit=U_RAW, boolean newVal=true)</div><div class="ttdoc">reads current angle value and converts it into the desired unit</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:340</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_a2e02b46721e5b2f32fcae3eda6b73368"><div class="ttname"><a href="classAMS__AS5048B.html#a2e02b46721e5b2f32fcae3eda6b73368">AMS_AS5048B::setClockWise</a></div><div class="ttdeci">void setClockWise(boolean cw=true)</div><div class="ttdoc">Set / unset clock wise counting - sensor counts CCW natively.</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:106</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_a4b356e895fbcddf68eeffaa020b27420"><div class="ttname"><a href="classAMS__AS5048B.html#a4b356e895fbcddf68eeffaa020b27420">AMS_AS5048B::angleRegR</a></div><div class="ttdeci">uint16_t angleRegR(void)</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:293</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_a5be27698e144b1889f9df2f43ad85cc9"><div class="ttname"><a href="classAMS__AS5048B.html#a5be27698e144b1889f9df2f43ad85cc9">AMS_AS5048B::getAutoGain</a></div><div class="ttdeci">uint8_t getAutoGain(void)</div><div class="ttdoc">reads the 1 bytes auto gain register value</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:308</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_a5ebbbdaf9712f2e7b23da3086515a34b"><div class="ttname"><a href="classAMS__AS5048B.html#a5ebbbdaf9712f2e7b23da3086515a34b">AMS_AS5048B::getMovingAvgExp</a></div><div class="ttdeci">double getMovingAvgExp(int unit=U_RAW)</div><div class="ttdoc">sent back the exponential moving averaged angle in the desired unit</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:409</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_a6513ba719d6a2267b74ed56ba078df2a"><div class="ttname"><a href="classAMS__AS5048B.html#a6513ba719d6a2267b74ed56ba078df2a">AMS_AS5048B::diagR</a></div><div class="ttdeci">uint8_t diagR(void)</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_a67cbd882f0300705d615ce1e2dff2f47"><div class="ttname"><a href="classAMS__AS5048B.html#a67cbd882f0300705d615ce1e2dff2f47">AMS_AS5048B::zeroRegW</a></div><div class="ttdeci">void zeroRegW(uint16_t regVal)</div><div class="ttdoc">writes the 2 bytes Zero position register value</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:256</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_a69012e91b30cd4182f072a7d2f377305"><div class="ttname"><a href="classAMS__AS5048B.html#a69012e91b30cd4182f072a7d2f377305">AMS_AS5048B::doProgZero</a></div><div class="ttdeci">void doProgZero(void)</div><div class="ttdoc">Burn values to the zero position OTP register.</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:167</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_a6ff8070d7845ce5ef325a6c64ea29c96"><div class="ttname"><a href="classAMS__AS5048B.html#a6ff8070d7845ce5ef325a6c64ea29c96">AMS_AS5048B::progRegister</a></div><div class="ttdeci">void progRegister(uint8_t regVal)</div><div class="ttdoc">writes OTP control register</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:124</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_a7784bc5f991bb485c2731a7189d277bf"><div class="ttname"><a href="classAMS__AS5048B.html#a7784bc5f991bb485c2731a7189d277bf">AMS_AS5048B::zeroRegR</a></div><div class="ttdeci">uint16_t zeroRegR(void)</div><div class="ttdoc">reads the 2 bytes Zero position register value</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:273</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_a8faebc24296fd8ac9464f5b5aab0d1d1"><div class="ttname"><a href="classAMS__AS5048B.html#a8faebc24296fd8ac9464f5b5aab0d1d1">AMS_AS5048B::addressRegW</a></div><div class="ttdeci">void addressRegW(uint8_t regVal)</div><div class="ttdoc">write I2C address value (5 bits) into the address register</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:202</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_a9acf55772619d8df888be48c8a31eef8"><div class="ttname"><a href="classAMS__AS5048B.html#a9acf55772619d8df888be48c8a31eef8">AMS_AS5048B::doProg</a></div><div class="ttdeci">void doProg(void)</div><div class="ttdoc">Burn values to the slave address OTP register.</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:140</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_ab0d51d2f59926a877e73b17c04db59ee"><div class="ttname"><a href="classAMS__AS5048B.html#ab0d51d2f59926a877e73b17c04db59ee">AMS_AS5048B::begin</a></div><div class="ttdeci">void begin(void)</div><div class="ttdoc">init values and overall behaviors for AS5948B use</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:57</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_ac2485a851c68e9a5b410c47ffc3485ca"><div class="ttname"><a href="classAMS__AS5048B.html#ac2485a851c68e9a5b410c47ffc3485ca">AMS_AS5048B::toggleDebug</a></div><div class="ttdeci">void toggleDebug(void)</div><div class="ttdoc">Toggle debug output to serial.</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:90</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_ac46ed9e5bbc07b3360fdb71de014eb59"><div class="ttname"><a href="classAMS__AS5048B.html#ac46ed9e5bbc07b3360fdb71de014eb59">AMS_AS5048B::AMS_AS5048B</a></div><div class="ttdeci">AMS_AS5048B(void)</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:32</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_ac4b8db2e8d36e45d894812aa799cd89e"><div class="ttname"><a href="classAMS__AS5048B.html#ac4b8db2e8d36e45d894812aa799cd89e">AMS_AS5048B::resetMovingAvgExp</a></div><div class="ttdeci">void resetMovingAvgExp(void)</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:414</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_acd55346e4eedada7b86e43f42822ae2a"><div class="ttname"><a href="classAMS__AS5048B.html#acd55346e4eedada7b86e43f42822ae2a">AMS_AS5048B::magnitudeR</a></div><div class="ttdeci">uint16_t magnitudeR(void)</div><div class="ttdoc">reads the 2 bytes magnitude register value</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:288</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_ad67ba3de9224a12102a31b35829450e8"><div class="ttname"><a href="classAMS__AS5048B.html#ad67ba3de9224a12102a31b35829450e8">AMS_AS5048B::setZeroReg</a></div><div class="ttdeci">void setZeroReg(void)</div><div class="ttdoc">sets current angle as the zero position</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:238</div></div>
<div class="ttc" id="aclassAMS__AS5048B_html_ae2ebf1d3b0e9b9cf73fbf5ea22ada636"><div class="ttname"><a href="classAMS__AS5048B.html#ae2ebf1d3b0e9b9cf73fbf5ea22ada636">AMS_AS5048B::getDiagReg</a></div><div class="ttdeci">uint8_t getDiagReg(void)</div><div class="ttdoc">reads the 1 bytes diagnostic register value</div><div class="ttdef"><b>Definition</b> ams_as5048b.cpp:323</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_faefbcd4073e220d11e75d5c0ae6a0d3.html">AbsoluteEncoder</a></li><li class="navelem"><a class="el" href="dir_7b8e2885ad252123a16a899883ddad2c.html">src</a></li><li class="navelem"><a class="el" href="ams__as5048b_8h.html">ams_as5048b.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
