<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PicoLowLevel: PicoLowLevel</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PicoLowLevel
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">PicoLowLevel </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> This is the code running on the board inside each module of Rese.Q MK1.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Module components</h1>
<p>The components inside each modules are:</p>
<ul>
<li>Raspberry Pi Pico W</li>
<li>CAN transceiver, with <a class="el" href="structMCP2515.html">MCP2515</a> and TJA1050</li>
<li>Two DC motors<ul>
<li>controlled by Pololu G2 24v13 drivers</li>
<li>rotary encoder with 48 pulses per motor rotation</li>
<li>150:1 gearbox</li>
</ul>
</li>
<li>One to three Dynamixel AX-12A smart servo motors</li>
<li>AMS AS5048B absolute encoder</li>
<li>64*128 OLED display with SH1106 driver</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Building</h1>
<p>To build the project you need PlatformIO. We suggest using <a href="https://platformio.org/install/ide?install=vscode">PlatformIO for VSCode</a>.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Arduino-Pico</h2>
<p>This project is based on the Arduino framework, and in particular uses the Raspberry Pi Pico available <a href="https://github.com/earlephilhower/arduino-pico">here</a>.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Libraries</h2>
<p>Libraries are automatically managed by <em>PlatformIO</em>, at the moment we are using:</p><ul>
<li><code>adafruit/Adafruit SH110X@^2.1.11</code> (for the OLED display)</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
Build options</h2>
<p>These are automatically managed by <em>PlatformIO</em>. The code requires the <em>Raspberry Pi Pico W</em> (<code>rpipicow</code>) board and the flash size should be set to <code>2MB (Sketch: 1MB, FS: 1MB)</code>, meaning that half of the microcontroller memory will be dedicated to the program itself, while the other half can be used for storing informations and performing over-the-air (OTA) upgrades.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Uploading Firmware</h1>
<h2><a class="anchor" id="autotoc_md7"></a>
Using GitHub Actions Artifacts</h2>
<p>To upload the firmware from the GitHub Actions artifacts, follow these steps:</p>
<ol type="1">
<li>Download the firmware artifact from the GitHub Actions page.</li>
<li>Put the Raspberry Pi Pico into BOOTSEL mode by holding down the BOOTSEL button while plugging it into your computer.</li>
<li>Drag and drop the downloaded firmware file (<code>uf2</code>) onto the RPI-RP2 drive that appears.</li>
</ol>
<h2><a class="anchor" id="autotoc_md8"></a>
Using PlatformIO</h2>
<p>PlatformIO can also be used to upload the firmware directly to the Pico when it is not in BOOTSEL mode. Ensure that PlatformIO is installed and available in your system's PATH.</p>
<ol type="1">
<li>Open a terminal and navigate to the project directory.</li>
<li>Use the <code>Upload</code> button in the PlatformIO panel</li>
</ol>
<h2><a class="anchor" id="autotoc_md9"></a>
Using Makefile</h2>
<p>A Makefile is provided to build and upload all firmware. This requires PlatformIO and make to be available in your system's PATH.</p>
<ol type="1">
<li>Open a terminal and navigate to the project directory.</li>
<li>Run the following command to build and upload the firmware: <div class="fragment"><div class="line">make</div>
</div><!-- fragment --></li>
</ol>
<p>This will compile the firmware for all the modules in <code>.pio/build/mod&lt;i&gt;/firmware.uf2</code> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
